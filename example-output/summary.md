# Code Analysis Report

> Generated: 2026-01-12 21:45

---

## Overview

| Metric | Count |
|--------|-------|
| Files analyzed | 3 |
| Classes | 3 |
| Functions | 269 |
| Call relationships | 2604 |

---

## Classes Found

### `PartialPaymentValidationError`

- **File:** `sales_invoice/sales_invoice.py`
- **Line:** 53
- **Inherits:** frappe.ValidationError
- **Methods:** 0

### `SalesInvoice`

- **File:** `sales_invoice/sales_invoice.py`
- **Line:** 57
- **Inherits:** SellingController
- **Methods:** 96

### `TestSalesInvoice`

- **File:** `sales_invoice/test_sales_invoice.py`
- **Line:** 54
- **Inherits:** ERPNextTestSuite
- **Methods:** 127

---

## Most Called Functions

These functions are called frequently — they're likely core utilities.

| Function | Call Count |
|----------|------------|
| `self.assertEqual` | 277 |
| `create_sales_invoice` | 95 |
| `_` | 94 |
| `flt` | 83 |
| `si.get` | 66 |
| `nowdate` | 65 |
| `frappe.db.get_value` | 45 |
| `frappe.get_doc` | 44 |
| `frappe.throw` | 43 |
| `si.submit` | 40 |

---

## Orchestrator Functions

These functions call many others — they're likely coordinators.

| Function | Calls Made |
|----------|------------|
| `SalesInvoice.validate` | 50 |
| `TestSalesInvoice.test_partial_allocation_on_advance_as_liability` | 37 |
| `SalesInvoice.on_submit` | 37 |
| `SalesInvoice.set_pos_fields` | 34 |
| `TestSalesInvoice.test_additional_discount_for_sales_invoice_with_discount_accounting_enabled` | 33 |
| `make_inter_company_transaction.update_details` | 31 |
| `TestSalesInvoice.test_sales_invoice_calculation_export_currency_with_tax_inclusive_price` | 30 |
| `SalesInvoice.on_cancel` | 30 |
| `TestSalesInvoice.test_outstanding_amount_after_advance_payment_entry_cancellation` | 28 |
| `TestSalesInvoice.test_internal_transfer_gl_entry` | 28 |

---

## External Dependencies

Modules imported across the codebase:

- `frappe.utils` (16 imports)
- `frappe` (8 imports)
- `erpnext.accounts.doctype.payment_entry.test_payment_entry` (8 imports)
- `erpnext.stock.doctype.item.test_item` (7 imports)
- `erpnext.accounts.doctype.sales_invoice.sales_invoice` (6 imports)
- `erpnext.assets.doctype.asset.depreciation` (6 imports)
- `erpnext.accounts.doctype.opening_invoice_creation_tool.test_opening_invoice_creation_tool` (5 imports)
- `erpnext.accounts.doctype.party_link.party_link` (5 imports)
- `erpnext.buying.doctype.supplier.test_supplier` (5 imports)
- `erpnext.controllers.sales_and_purchase_return` (5 imports)
- `erpnext.accounts.doctype.account.test_account` (4 imports)
- `erpnext.stock.doctype.stock_entry.test_stock_entry` (4 imports)
- `erpnext.stock.get_item_details` (4 imports)
- `erpnext.accounts.general_ledger` (4 imports)
- `erpnext.accounts.utils` (3 imports)

---

*Report generated by Code Analyzer*